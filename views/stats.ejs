<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Stats Calendar</title>

  <!-- FullCalendar CSS -->
  <link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.20/index.global.min.css" rel="stylesheet">
  <link rel="stylesheet" href="../stylesheets/input.css">
</head>

<body>

  <div class="buttons">
    <a class="cta" href="/d/<%= userid %>">
      <button>Profile</button>
    </a>
  </div>

  <h1>Stats Calendar</h1>

  <div id="calendar"></div>

  <!-- Modal -->
  <div id="statsModal" class="modal">
    <div class="modal-content">

      <form class="my-form" action="/stats/show" method="POST">
        <h2>Add Stats</h2>

        <input type="hidden" name="playerId" value="<%= userid %>">
        <input type="hidden" name="date" id="statDate">

        <div class="form-group">
          <label>Runs</label>
          <input type="number" name="runs" required>
        </div>

        <div class="form-group">
          <label>Wickets</label>
          <input type="number" name="wickets" required>
        </div>

        <div class="form-group">
          <label>Overs</label>
          <input type="number" name="overs" required>
        </div>

        <div class="form-group">
          <label>Notes</label>
          <textarea name="notes"></textarea>
        </div>

        <div class="modal-buttons">
          <button type="submit" class="submit-btn">Save Stats</button>
          <button type="button" class="cancel-btn" onclick="closeModal()">Cancel</button>
        </div>

      </form>

    </div>
  </div>

  <!-- FullCalendar JS -->
  <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.20/index.global.min.js"></script>

  <script>
    document.addEventListener('DOMContentLoaded', function () {
      var calendarEl = document.getElementById('calendar');

      var calendar = new FullCalendar.Calendar(calendarEl, {
        initialView: 'dayGridMonth',

        headerToolbar: {
          left: 'prev,next today',
          center: 'title',
          right: 'dayGridMonth,timeGridWeek,listWeek'
        },

        dateClick: function(info) {
          document.getElementById("statDate").value = info.dateStr;
          document.getElementById("statsModal").style.display = "flex";
        }
      });

      calendar.render();
    });

    function closeModal() {
      document.getElementById("statsModal").style.display = "none";
    }

    window.onclick = function(event) {
      const modal = document.getElementById("statsModal");
      if (event.target === modal) {
        modal.style.display = "none";
      }
    }
  </script>

</body>
</html>

